![Logo](https://raw.github.com/JohannesHoppe/DeveloperMediaDemo/master/Documentation/images/developer_media_logo.jpg)

# Knockout Webinar - Documentation

##### Table of Contents  
1. [Introduction](#introduction)
2. [Basic Knockout Setup](#setup)


<a name="introduction"/>
## 1. Introduction

[Last time](https://github.com/JohannesHoppe/DeveloperMediaDemo/blob/master/Documentation/01.%20Knockout%20Webinar.md) we created a first index page, which showed a list of notes with the help of the "foreach"-Binding. This time we want to show one Note and __edit__ its content. During the following chapters we will learn some new bindings that are handy for processing form data.

 
<a name="setup"/>
## 2. Basic Knockout Setup

Similar to the last time, we start with a plain HTML page, that is going to be our Knockout-View.   


```html
<div id="edit_template">
    
    <h1>Header</h1>
    <div class="drop_shadow bigpostit">
           
        <form>
            <fieldset>
        
                <label class="rowLeft">Title:</label>
                <input class="rowRight" type="text" /> 

                <label class="rowLeft">Message:</label>
                <textarea class="rowRight"></textarea>
        
                <div class="rowLeft">Categories:</div>
                <ul class="rowRight">
                    <li>
                        <input type="checkbox" name="Categories"> 
                        <label>Checbox</label>
                    </li>
                </ul>
                <p>
                    <input type="submit" value="Save">
                </p>

            </fieldset> 
        </form>
    </div>
</div>
```

This HTML renders to a simple form:  

![Screenshot](https://raw.github.com/JohannesHoppe/DeveloperMediaDemo/master/Documentation/images/02_1_plain_form.png) 

Again we need a module (called __'editPage'__) to wire up the ViewModel with the HTML-View. It is nearly identical the the __'indexPage'__ that was shown last time. (We will care about this duplicate code later on!)  

```javascript
// editPage.js
define(['knockout', 'jquery', 'app/EditPageViewModel'], function (ko, $, EditPageViewModel) {

    var init = function (id) {

        var model = new EditPageViewModel(id);
        ko.applyBindings(model, $('#edit_template').get(0));
        model.loadData();
    };

    return {
        init: init
    };
});
```

As we can see, the init-Method of the editPage-Module as well as the constructor of the ViewModel accepts an __id__ as a parameter. It is just a value that we set up in the @section of start the page with the help of a Razor-Engine placeholder. This approach is very rough and does not leverage any of the advanced features that a true JavaScript-driven page could offer. 

```javascript
@section scripts  { 
    var id = @ViewBag.Id;
    require(['app/editPage'], function(i) { 
        i.init(id); 
    });
}  
```

It is a good idea to start with an empty ViewModel. This allows us to immediately show some initial data to the user. As soon as the initial binding was processed an AJAX call can be placed. As soon as the data arrives, the ViewModels values can be updated with the new data. Since all properties of the ViewModel are observables (which mean that changes are tracked) changes to the ViewModels properties are immediately reflected in the View.

```javascript
// EditPageViewModel.js
define(['jquery', 'knockout', 'knockout.mapping'], function ($, ko, mapping) {

    var EditPageViewModel = function(id) {

        var self = this;

        self.Id = ko.observable();
        self.Title = ko.observable();
        self.Message = ko.observable();
        self.Categories = ko.observableArray();
        
        self.loadData = function () {

            $.ajax('/api/note/' + id).done(function (xhr) {
                self = mapping.fromJS(xhr, {}, self);
            });
        };
    };

    return EditPageViewModel;
});

``` 

  
<hr>
_&copy; 2013, Johannes Hoppe_