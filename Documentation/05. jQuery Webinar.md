![Logo](https://raw.github.com/JohannesHoppe/DeveloperMediaDemo/master/Documentation/images/developer_media_logo.jpg)

# jQuery 2013 Webinar - Documentation

##### Table of Contents  
1. [Introduction](#introduction) 
3. [jQuery core](#core)  
2.1. [Basics](#basics)  
2.2. [Event API](#events)  
2.3. [Asynchronous Communication](#ajax)  
3. [ASP.NET MVC & Bundling](#aspnetmvc)
4. [More](#more)

<a name="introduction"/>
## 1. Introduction

In the last [webinar](http://bit.ly/devMediaCode) we were introduced to Knockout.js and the ASP.NET Web API as well as REST principles. We continuously used a JavaScript library called "jQuery". During the recent webinars nobody asked for an explanation of the jQuery code. This was no surprise, since Query is the most popular JavaScript library on the market. Chances are very high that you have already seen jQuery in the wild, too. In most of my projects I have seen jQuery as a standard for DOM manipulation and AJAX handling. These use cases are inbuilt since the very early beginning of jQuery. Due to the fact that everything works smoothly and that API stayed compatible for most of the cases, a lot of people do not really care about the progress that the framework has made since the early days. Let's start with an introduction for jQuery newcomers and continue with some parts that have changed during the versions.  

<a name="core"/>
## 2. jQuery core

<a name="basics"/>
### 2.1. Basics

This plain JavaScript snippet manipulates the Document Object Model (DOM) a bit by adding a background color and some padding to all &lt;div&gt; elements:

```html
<div class="postit">
    <h2>Hello World</h2>
</div>        

<script> 
    var divs = document.getElementsByClassName('postit');

    for (i = 0; i < divs.length; i++) {
        divs[i].style.backgroundColor = '#F0F0A6';
        divs[i].style.padding = '10px';
    }
</script>
```

During development you want to concentrate on solving tasks instead of writing boilerplate code. But hey, at least it works, doesn't it?

It doesn't.. Soon we would find out that there are numerous compatibility issues across different browsers. This snippet for example doesn't works in until IE9!

![Screenshot IE8 error](https://raw.github.com/JohannesHoppe/DeveloperMediaDemo/master/Documentation/images/05_02_ie8error.png)  
([reference](http://www.quirksmode.org/dom/w3c_core.html)) 

The shown method is specified since the very early days, but for a full decade the Internet Explorer hasn't implemented it. So we are forced to use the following extra bits of code to get the expected result in IE8 (older version will still struggle):

```js
if(!document.getElementsByClassName) {
    document.getElementsByClassName = function(className) {
        return this.querySelectorAll("." + className);
    };
    Element.prototype.getElementsByClassName = document.getElementsByClassName;
}
```

Or we use a small framework that hardens and simplifies DOM manipulation, event handling, animation and AJAX. The same result can be expressed like this with jQuery.

```html
<div class="postit">
    <h2>Hello World</h2>
</div>

<script>
$(".postit").css({
    backgroundColor: '#F0F0A6',
    padding: '10px'
});
</script>
``` 

It's much more easier to write jQuery than pure JavaScript. For most cases there is always the same procedure:

1. Select some HTML
2. Do something with it

### 2.1.1 Selectors

JQuery uses the [Sizzle Selector Engine](http://sizzlejs.com/) to select one or more HTML elements via CSS3 selectors. For this, the [$](http://api.jquery.com/jQuery/) function must be called with a string containing a such a selector. The matched HTML elements will be presented as an [array-like collection](http://api.jquery.com/jQuery.makeArray/) of jQuery objects.

Here are some examples:

```js
$("#myId")       // selects (one) element with the id "myId" 
$(".myClass")    // selects all elements with the class name "myClass"
$("div")         // selects all elements of type "div"
$("div:first")   // selects the first element of type "div"
$("div:odd")     // selects odd "div" elements, zero-indexed
$("input:not(:checked)") // equals to
$("input").not(":checked")
```

There are much more [selectors to discover](http://api.jquery.com/category/selectors/).

[Performance Tips](http://www.sitepoint.com/efficient-jquery-selectors/):

1. **Use IDs where possible**
```js
$("#myId")
```
The native document.getElementById method will be used.

2. **Avoid selecting by class only**
```js
$(".myClass")    // slow
$("div.myClass") // fast
```
The second option wouldn't be slow in older browsers and might help other developers to understand your code, too.

3. **KISS**
Keep it Simple. Complex selectors are just an result of complex HTML. Complex selectors are slow.

4. **Increase Specificity from Left to Right**
If no optimization can be applied, the selector engine (as well as the browsers CSS selectors) are matched from right to left. This can be be very slow if there are a lot of paragraphs in the document:
```js
$("div.content p"); // might be slow
```
First it will find all p elements in the document and then checks them against the "div.content" condition.
Depending on the document, it might be a good idea to help the selector engine. This example reduces the amount of work, since the left side is matched first and the next search can iterate over a reduced amount of elements:.
```js
$("div.content").find("p"); // might be faster
```
Please note: those tricks should be only done when necessary. You will know when it's time to optimize the selectors. To find hot spots and to verify the optimization, you should take a closer look on a performance comparison tools. (eg. Firebug)

5. **Avoid touching the DOM**
This is the most important rule: All browsers there have two engines; the Rendering Engine and the JavaScript engine. As soon as the JS engine is going to talk to the DOM (provided by the rendering engine) speed is going drastically down. (by the way: [Chrome/Blink plans to change that](http://www.chromium.org/blink#architectural-changes))
```js
// bad:
$("p").css("color", "blue");
$("p").addClass("myClass");  
.
// chaining
$("p").css("color", "blue")
      .addClass("myClass");  
.
// save to local variable 
var $p = $("p");
$p.css("color", "blue")
$p.addClass("myClass");
```   

### 2.1.2 Actions on jQuery objects

The result of a selection is always a jQuery collection. On each of the elements of that collection a huge amount of functions can be applied. This includes:

1. [Manipulation of elements](http://api.jquery.com/category/manipulation/)
```append(), appendTo(), remove(), before(), after()```

2. [Change of element attributes](http://api.jquery.com/category/attributes/)
```css(), attr(), html(), val(), addClass()```

3. [Traversing](http://api.jquery.com/category/traversing/)
```find(), is(), prevAll(), next(), hasClass()```

5. [Events](http://api.jquery.com/category/events/)
```click(), on(), off(), trigger() --- Deprecated: bind(), live()...```  

6. [Effects](http://api.jquery.com/category/effects/)
```show(), fadeOut(), toggle(), animate()```

7. [AJAX](http://api.jquery.com/category/ajax/)
```ajax(), get(), post()```

 


<a name="events"/>
### 2.2. Event API

<a name="ajax"/>
### 2.3. Asynchronous Communication

<a name="aspnetmvc"/>
## 3. ASP.NET MVC & Bundling 

http://bartwullems.blogspot.de/2012/07/minification-and-bundling-in-aspnet.html

<a name="more"/>
## 4. More 

There are several more things to discover.
You should start by downloading the sources of the demo app.  

**TODO!**
<!--
&nbsp;&nbsp; __[&raquo; Download Demo-Code (.zip)](http://dl.bintray.com/johanneshoppe/DeveloperMediaDemo/DeveloperMediaWebinar_ASPNET_Web_API_Teil2.zip?direct)__
-->

A great book is ["jQuery in Action"](http://www.manning.com/bibeault2/). It goes into details where other books still cover boring topics! 

[![Book cover](https://raw.github.com/JohannesHoppe/DeveloperMediaDemo/master/Documentation/images/05_01_book.jpg)](http://www.manning.com/bibeault2/)

<hr>

_&copy; 2013, Johannes Hoppe_